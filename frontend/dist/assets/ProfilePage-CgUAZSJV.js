import{d as k,u as w,r as g,l as h,i as A,c as o,a as t,b,t as a,p,F as R,q as M,C,D as S,o as r}from"./index-DS9LWC7p.js";const L={class:"container mx-auto px-4 pt-24"},D={class:"max-w-3xl mx-auto"},F={class:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-8"},P={class:"space-y-4"},B={class:"mt-1 text-gray-600 dark:text-gray-300"},E={class:"mt-1 text-gray-600 dark:text-gray-300"},N={class:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-8"},I={key:0,class:"grid grid-cols-1 md:grid-cols-3 gap-6"},U={key:1,class:"grid grid-cols-1 md:grid-cols-3 gap-6"},V={class:"text-center"},W={class:"text-3xl font-bold text-primary"},j={class:"text-center"},q={class:"text-3xl font-bold text-primary"},z={class:"text-center"},G={class:"text-3xl font-bold text-primary"},H={key:0,class:"text-red-500 text-sm mb-4"},J={key:1,class:"text-green-500 text-sm mb-4"},Q=k({__name:"ProfilePage",setup(K){const i=w(),m=A(),c=g(!1),u=g(""),y=g(""),n=g({totalMoviesRated:0,watchlistCount:0,averageRating:0}),v=async()=>{c.value=!0;try{const[l,e]=await Promise.all([C(),S()]),d=Array.isArray(l)?l:[],s=Array.isArray(e)?e:[];n.value={totalMoviesRated:s.length,watchlistCount:d.length,averageRating:s.length>0?Number((s.reduce((x,_)=>x+(_.rating||0),0)/s.length).toFixed(1)):0}}catch(l){console.error("Error fetching user stats:",l),u.value="Failed to load user statistics"}finally{c.value=!1}},f=()=>{i.logout(),m.push("/login")};return h(()=>{i.isAuthenticated?v():m.push("/login")}),h(v),(l,e)=>{var d,s;return r(),o("div",L,[t("div",D,[e[8]||(e[8]=t("h1",{class:"text-3xl font-bold text-gray-900 dark:text-white mb-8"}," Profile Settings ",-1)),t("div",F,[e[2]||(e[2]=t("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"}," Account Information ",-1)),t("div",P,[t("div",null,[e[0]||(e[0]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200"},"Email",-1)),t("p",B,a((d=p(i).user)==null?void 0:d.email),1)]),t("div",null,[e[1]||(e[1]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200"}," Member since ",-1)),t("p",E,a(new Date((s=p(i).user)==null?void 0:s.created_at).toLocaleDateString()),1)])])]),t("div",N,[e[7]||(e[7]=t("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"}," Statistics ",-1)),c.value?(r(),o("div",I,[(r(),o(R,null,M(3,x=>t("div",{key:x,class:"text-center animate-pulse"},e[3]||(e[3]=[t("div",{class:"h-10 bg-gray-200 dark:bg-gray-700 rounded mb-2"},null,-1),t("div",{class:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mx-auto"},null,-1)]))),64))])):(r(),o("div",U,[t("div",V,[t("p",W,a(n.value.totalMoviesRated),1),e[4]||(e[4]=t("p",{class:"text-gray-600 dark:text-gray-300"}," Movies Rated ",-1))]),t("div",j,[t("p",q,a(n.value.watchlistCount),1),e[5]||(e[5]=t("p",{class:"text-gray-600 dark:text-gray-300"}," In Watchlist ",-1))]),t("div",z,[t("p",G,a(n.value.averageRating)+"/5 ",1),e[6]||(e[6]=t("p",{class:"text-gray-600 dark:text-gray-300"}," Average Rating ",-1))])]))]),u.value?(r(),o("div",H,a(u.value),1)):b("",!0),y.value?(r(),o("div",J,a(y.value),1)):b("",!0),t("div",{class:"flex justify-end"},[t("button",{onClick:f,class:"bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600"}," Logout ")])])])}}});export{Q as default};
