import{d as k,r as g,l as w,c as r,a as t,F as y,q as v,t as d,f as _,g as C,D as R,h as $,o as l,k as h,A as D,i as V}from"./index-CciAqYaA.js";import{_ as j}from"./RatingStars.vue_vue_type_script_setup_true_lang-BGWef2Iq.js";const A={class:"container mx-auto px-4 py-8"},F={key:0,class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"},M={key:1,class:"text-center py-12"},U={class:"text-red-500"},B={key:2,class:"text-center py-12"},L={key:3,class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"},N=["onClick"],P=["src","alt"],T={class:"p-4"},Y=["onClick"],E={class:"flex items-center justify-between text-sm text-gray-600 dark:text-gray-400 mb-3"},S={class:"flex items-center gap-1"},q={class:"flex items-center justify-between mb-3"},z={class:"mt-4 flex justify-between items-center"},K={class:"text-sm text-gray-500 dark:text-gray-400"},G=["onClick"],O=k({__name:"RatingsPage",setup(H){const x=V(),n=g([]),u=g(!0),c=g(""),b="fd67da597c4cf7b23c2434f79fd181e2",p=async()=>{try{const a=await R(),e=await Promise.all(a.map(async i=>{const o=await(await fetch(`https://api.themoviedb.org/3/movie/${i.movie_id}?api_key=${b}`)).json();return{...o,rating:i.rating,ratedAt:i.created_at,poster_path:o.poster_path?`https://image.tmdb.org/t/p/w500${o.poster_path}`:null}}));n.value=e}catch{c.value="Failed to load rated movies"}finally{u.value=!1}},f=async a=>{try{await D(a),n.value=n.value.filter(e=>e.id!==a)}catch(e){console.error("Failed to remove rating:",e)}},m=a=>{x.push(`/movies/${a}`)};return w(p),(a,e)=>{const i=$("router-link");return l(),r("div",A,[e[5]||(e[5]=t("div",{class:"flex justify-between items-center mb-8"},[t("h1",{class:"text-3xl font-bold text-gray-900 dark:text-white"}," My Ratings ")],-1)),u.value?(l(),r("div",F,[(l(),r(y,null,v(8,s=>t("div",{key:s,class:"animate-pulse"},e[0]||(e[0]=[t("div",{class:"aspect-[2/3] bg-gray-200 dark:bg-gray-700 rounded-lg mb-2"},null,-1),t("div",{class:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-2"},null,-1),t("div",{class:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2"},null,-1)]))),64))])):c.value?(l(),r("div",M,[t("p",U,d(c.value),1),t("button",{onClick:p,class:"mt-4 text-primary hover:text-primary/90"}," Try Again ")])):n.value.length===0?(l(),r("div",B,[e[2]||(e[2]=t("p",{class:"text-gray-600 dark:text-gray-300 text-lg mb-4"}," You haven't rated any movies yet ",-1)),_(i,{to:"/",class:"text-primary hover:text-primary/90 font-medium"},{default:C(()=>e[1]||(e[1]=[h(" Discover movies to rate ")])),_:1})])):(l(),r("div",L,[(l(!0),r(y,null,v(n.value,s=>(l(),r("div",{key:s.id,class:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden group"},[t("div",{class:"relative aspect-[2/3] cursor-pointer",onClick:o=>m(s.id)},[t("img",{src:s.poster_path||void 0,alt:s.title,class:"w-full h-full object-cover"},null,8,P),e[3]||(e[3]=t("div",{class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-opacity duration-300"},null,-1))],8,N),t("div",T,[t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2 cursor-pointer hover:text-primary",onClick:o=>m(s.id)},d(s.title),9,Y),t("div",E,[t("span",null,d(new Date(s.release_date).getFullYear()),1),t("div",S,[e[4]||(e[4]=t("span",{class:"text-yellow-400"},"â˜…",-1)),h(" "+d(Math.round(s.vote_average*10)/10),1)])]),t("div",q,[_(j,{modelValue:s.rating,"onUpdate:modelValue":o=>s.rating=o,size:"sm",disabled:""},null,8,["modelValue","onUpdate:modelValue"])]),t("div",z,[t("span",K," Rated "+d(new Date(s.ratedAt).toLocaleDateString()),1),t("button",{onClick:o=>f(s.id),class:"text-red-500 hover:text-red-600 transition-colors"}," Unrate ",8,G)])])]))),128))]))])}}});export{O as default};
