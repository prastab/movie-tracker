import{d as _,u as k,r as g,l as y,i as w,c as a,a as t,b as h,t as s,p as b,F as R,q as M,C,D as S,o}from"./index-CciAqYaA.js";const A={class:"container mx-auto px-4 pt-24"},L={class:"max-w-3xl mx-auto"},D={class:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-8"},F={class:"space-y-4"},P={class:"mt-1 text-gray-600 dark:text-gray-300"},B={class:"mt-1 text-gray-600 dark:text-gray-300"},E={class:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-8"},N={key:0,class:"grid grid-cols-1 md:grid-cols-3 gap-6"},I={key:1,class:"grid grid-cols-1 md:grid-cols-3 gap-6"},U={class:"text-center"},V={class:"text-3xl font-bold text-primary"},W={class:"text-center"},j={class:"text-3xl font-bold text-primary"},q={class:"text-center"},z={class:"text-3xl font-bold text-primary"},G={key:0,class:"text-red-500 text-sm mb-4"},H={key:1,class:"text-green-500 text-sm mb-4"},O=_({__name:"ProfilePage",setup(J){const r=k(),x=w(),c=g(!1),u=g(""),m=g(""),l=g({totalMoviesRated:0,watchlistCount:0,averageRating:0}),v=async()=>{c.value=!0;try{const[i,e]=await Promise.all([C(),S()]);l.value={totalMoviesRated:e.length,watchlistCount:i.length,averageRating:e.length>0?Number((e.reduce((n,d)=>n+d.rating,0)/e.length).toFixed(1)):0}}catch(i){console.error("Error fetching user stats:",i),u.value="Failed to load user statistics"}finally{c.value=!1}},p=()=>{r.logout(),x.push("/login")};return y(()=>{r.isAuthenticated?v():x.push("/login")}),y(v),(i,e)=>{var n,d;return o(),a("div",A,[t("div",L,[e[8]||(e[8]=t("h1",{class:"text-3xl font-bold text-gray-900 dark:text-white mb-8"}," Profile Settings ",-1)),t("div",D,[e[2]||(e[2]=t("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"}," Account Information ",-1)),t("div",F,[t("div",null,[e[0]||(e[0]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200"},"Email",-1)),t("p",P,s((n=b(r).user)==null?void 0:n.email),1)]),t("div",null,[e[1]||(e[1]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200"}," Member since ",-1)),t("p",B,s(new Date((d=b(r).user)==null?void 0:d.created_at).toLocaleDateString()),1)])])]),t("div",E,[e[7]||(e[7]=t("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"}," Statistics ",-1)),c.value?(o(),a("div",N,[(o(),a(R,null,M(3,f=>t("div",{key:f,class:"text-center animate-pulse"},e[3]||(e[3]=[t("div",{class:"h-10 bg-gray-200 dark:bg-gray-700 rounded mb-2"},null,-1),t("div",{class:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mx-auto"},null,-1)]))),64))])):(o(),a("div",I,[t("div",U,[t("p",V,s(l.value.totalMoviesRated),1),e[4]||(e[4]=t("p",{class:"text-gray-600 dark:text-gray-300"}," Movies Rated ",-1))]),t("div",W,[t("p",j,s(l.value.watchlistCount),1),e[5]||(e[5]=t("p",{class:"text-gray-600 dark:text-gray-300"}," In Watchlist ",-1))]),t("div",q,[t("p",z,s(l.value.averageRating)+"/5 ",1),e[6]||(e[6]=t("p",{class:"text-gray-600 dark:text-gray-300"}," Average Rating ",-1))])]))]),u.value?(o(),a("div",G,s(u.value),1)):h("",!0),m.value?(o(),a("div",H,s(m.value),1)):h("",!0),t("div",{class:"flex justify-end"},[t("button",{onClick:p,class:"bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600"}," Logout ")])])])}}});export{O as default};
