import{d as b,r as g,l as f,c as o,a as t,F as y,q as h,t as n,f as w,g as C,C as M,h as $,o as r,k as m,y as A,i as D}from"./index-DS9LWC7p.js";const F={class:"container mx-auto px-4 py-8"},j={key:0,class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"},W={key:1,class:"text-center py-12"},B={class:"text-red-500"},L={key:2,class:"text-center py-12"},N={key:3,class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"},P=["onClick"],R=["src","alt"],T={class:"p-4"},V=["onClick"],Y={class:"flex items-center justify-between text-sm text-gray-600 dark:text-gray-400"},E={class:"flex items-center gap-1"},S={class:"mt-4 flex justify-between items-center"},q={class:"text-sm text-gray-500 dark:text-gray-400"},K=["onClick"],H=b({__name:"WatchlistPage",setup(z){const x=D(),i=g([]),u=g(!0),c=g(""),_="fd67da597c4cf7b23c2434f79fd181e2",p=async()=>{try{const a=await M(),e=await Promise.all(a.map(async d=>{const l=await(await fetch(`https://api.themoviedb.org/3/movie/${d.id}?api_key=${_}`)).json();return{...l,addedAt:d.addedAt,poster_path:l.poster_path?`https://image.tmdb.org/t/p/w500${l.poster_path}`:null}}));i.value=e}catch(a){console.log(a),c.value="Failed to load watchlist"}finally{u.value=!1}},k=async a=>{try{await A(a),i.value=i.value.filter(e=>e.id!==a)}catch(e){console.error("Failed to remove movie:",e)}},v=a=>{x.push(`/movies/${a}`)};return f(p),(a,e)=>{const d=$("router-link");return r(),o("div",F,[e[5]||(e[5]=t("div",{class:"flex justify-between items-center mb-8"},[t("h1",{class:"text-3xl font-bold text-gray-900 dark:text-white"}," My Watchlist ")],-1)),u.value?(r(),o("div",j,[(r(),o(y,null,h(8,s=>t("div",{key:s,class:"animate-pulse"},e[0]||(e[0]=[t("div",{class:"aspect-[2/3] bg-gray-200 dark:bg-gray-700 rounded-lg mb-2"},null,-1),t("div",{class:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-2"},null,-1),t("div",{class:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2"},null,-1)]))),64))])):c.value?(r(),o("div",W,[t("p",B,n(c.value),1),t("button",{onClick:p,class:"mt-4 text-primary hover:text-primary/90"}," Try Again ")])):i.value.length===0?(r(),o("div",L,[e[2]||(e[2]=t("p",{class:"text-gray-600 dark:text-gray-300 text-lg mb-4"}," Your watchlist is empty ",-1)),w(d,{to:"/",class:"text-primary text-black dark:text-gray-200 hover:text-primary/90 font-medium"},{default:C(()=>e[1]||(e[1]=[m(" Discover movies to add ")])),_:1})])):(r(),o("div",N,[(r(!0),o(y,null,h(i.value,s=>(r(),o("div",{key:s.id,class:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden group"},[t("div",{class:"relative aspect-[2/3] cursor-pointer",onClick:l=>v(s.id)},[t("img",{src:s.poster_path||void 0,alt:s.title,class:"w-full h-full object-cover"},null,8,R),e[3]||(e[3]=t("div",{class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-opacity duration-300"},null,-1))],8,P),t("div",T,[t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2 cursor-pointer hover:text-primary",onClick:l=>v(s.id)},n(s.title),9,V),t("div",Y,[t("span",null,n(new Date(s.release_date).getFullYear()),1),t("div",E,[e[4]||(e[4]=t("span",{class:"text-yellow-400"},"â˜…",-1)),m(" "+n(Math.round(s.vote_average*10)/10),1)])]),t("div",S,[t("span",q," Added "+n(new Date(s.addedAt).toLocaleDateString()),1),t("button",{onClick:l=>k(s.id),class:"text-red-500 hover:text-red-600 transition-colors"}," Remove ",8,K)])])]))),128))]))])}}});export{H as default};
